<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soda Tracker - Dashboard</title>
    <style>
        /* CSS from your original file */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #fef5e7 0%, #fdebd0 50%, #fadbd8 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header {
            text-align: center; color: #2c3e50; margin-bottom: 3rem;
            background: white; padding: 2rem; border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .header h1 {
            font-size: 2.5rem; margin-bottom: 0.5rem; font-weight: 700;
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }
        .header h1 .year {
            text-decoration: underline; text-decoration-color: #e67e22;
            text-decoration-thickness: 3px; text-underline-offset: 5px;
        }
        .header .subtitle {
            font-size: 1.2rem; opacity: 0.8; font-weight: 400; font-style: italic; color: #34495e;
        }
        .stats-section {
            background: white; padding: 2rem; margin-bottom: 2rem;
            border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .stats-section h2 { margin-bottom: 1.5rem; color: #2c3e50; font-size: 1.8rem; }
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem; margin-bottom: 2rem;
        }
        .stat-card {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            color: white; padding: 2rem; border-radius: 12px; text-align: center;
            box-shadow: 0 4px 12px rgba(230, 126, 34, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(230, 126, 34, 0.4); }
        .stat-card h3 {
            font-size: 1rem; margin-bottom: 0.75rem; opacity: 0.9;
            font-weight: 500; text-transform: uppercase; letter-spacing: 1px;
        }
        .stat-value { font-size: 3rem; font-weight: 700; line-height: 1; }
        .stat-unit { font-size: 1rem; opacity: 0.8; margin-top: 0.5rem; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid #e0e0e0; }
        th {
            background-color: #fef5e7; font-weight: 600; color: #2c3e50;
            font-size: 0.95rem; text-transform: uppercase; letter-spacing: 0.5px;
        }
        tr:hover { background-color: #fef5e7; }
        td { font-size: 1rem; }
        .soda-name { font-weight: 600; color: #2c3e50; }
        .number-cell { font-weight: 600; color: #e67e22; }
        .chart-container { position: relative; height: 400px; margin-bottom: 1.5rem; }
        .chart-controls { display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; }
        .time-range-btn {
            padding: 0.75rem 1.5rem; border: 2px solid #e67e22; background: white;
            color: #e67e22; border-radius: 8px; font-size: 1rem; font-weight: 600;
            cursor: pointer; transition: all 0.3s ease;
        }
        .time-range-btn:hover {
            background: #fef5e7; transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(230, 126, 34, 0.2);
        }
        .time-range-btn.active {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            color: white; border-color: #e67e22; box-shadow: 0 4px 12px rgba(230, 126, 34, 0.3);
        }
        
        /* Mobile Breakpoints */
        @media (max-width: 768px) {
            body { padding: 1rem 0.5rem; }
            .header h1 { font-size: 1.5rem; }
            .stats-grid { grid-template-columns: 1fr; }
            table { display: block; overflow-x: auto; }
            .chart-container { height: 300px; }
        }
    </style>
</head>
<body>
    <div class="container">
        
<div class="header">
    <h1>During the <span class="year">2026</span> season, Liam Drank How Much??</h1>
    <p class="subtitle">The most important statistics in FRC</p>
</div>

<div class="stats-section">
    <h2>Overall Statistics</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <h3>Total Cans</h3>
            <div id="total-cans" class="stat-value">0</div>
            <div class="stat-unit">cans consumed</div>
        </div>
        <div class="stat-card">
            <h3>Total Sugar</h3>
            <div id="total-sugar" class="stat-value">0</div>
            <div class="stat-unit">grams</div>
        </div>
        <div class="stat-card">
            <h3>Recycling Value</h3>
            <div id="recycling-value" class="stat-value">$0.00</div>
            <div class="stat-unit">earned back</div>
        </div>
    </div>
</div>

<div class="stats-section">
    <h2>Consumption by Type</h2>
    <table id="soda-table">
        <thead>
            <tr>
                <th>Soda Type</th>
                <th>Cans</th>
                <th>Sugar (g)</th>
                <th>Recycling Value</th>
            </tr>
        </thead>
        <tbody>
            
            
            <tr>
                <td class="soda-name">Cherry Pepsi</td>
                <td class="number-cell">2</td>
                <td class="number-cell">84</td>
                <td class="number-cell">$0.2</td>
            </tr>
            
            <tr>
                <td class="soda-name">Pepsi</td>
                <td class="number-cell">4</td>
                <td class="number-cell">168</td>
                <td class="number-cell">$0.4</td>
            </tr>
            
        </tbody>
    </table>
</div>

<div class="stats-section">
    <h2>Daily Consumption Trend</h2>
    <div class="chart-container">
        <canvas id="sodaChart"></canvas>
    </div>
    <div class="chart-controls">
        <button data-range="week" class="time-range-btn active">Last 7 Days</button>
        <button data-range="month" class="time-range-btn">Last 30 Days</button>
        <button data-range="season" class="time-range-btn">Full Season</button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
    // --- STATISTICS LOGIC ---
    // This runs on the client side to sum up the table rows generated by Nunjucks
    function updateOverallStatistics() {
        const tableRows = document.querySelectorAll('#soda-table tbody tr');
        let totalCans = 0;
        let totalSugar = 0;
        let totalRecyclingValue = 0;

        tableRows.forEach(row => {
            const cells = row.cells;
            // The logic matches your original structure:
            // cells[1] = count, cells[2] = sugar, cells[3] = value ($)
            
            const cans = parseInt(cells[1].textContent) || 0;
            const sugar = parseFloat(cells[2].textContent) || 0;
            const recycling = parseFloat(cells[3].textContent.replace("$", "")) || 0;

            totalCans += cans;
            totalSugar += sugar;
            totalRecyclingValue += recycling;
        });

        document.getElementById("total-cans").textContent = totalCans;
        document.getElementById("total-sugar").textContent = totalSugar.toFixed(0);
        document.getElementById("recycling-value").textContent = "$" + totalRecyclingValue.toFixed(2);
    }

    // --- CHART LOGIC ---
    const chartData = {
        week: {
            labels: ['Jan 10', 'Jan 11', 'Jan 12', 'Jan 13', 'Jan 14', 'Jan 15', 'Jan 16'],
            data: [2, 0, 0, 2, 0, 1, 1]
        },
        month: {
            labels: ['Jan 10', 'Jan 11', 'Jan 12', 'Jan 13', 'Jan 14', 'Jan 15', 'Jan 16'],
            data: [2, 0, 0, 2, 0, 1, 1]
        },
        season: {
            labels: ['Week 1'],
            data: [6]
        }
    };

    let currentChart = null;

    function createChart(range) {
        const ctx = document.getElementById('sodaChart').getContext('2d');
        if (currentChart) currentChart.destroy();

        const data = chartData[range];

        currentChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Cans of Soda',
                    data: data.data,
                    borderColor: '#e67e22',
                    backgroundColor: 'rgba(230, 126, 34, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: '#e67e22',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(44, 62, 80, 0.95)',
                        callbacks: {
                            label: function(context) {
                                return context.parsed.y === 1 ? '1 can' : context.parsed.y + ' cans';
                            }
                        }
                    }
                },
                scales: {
                    y: { beginAtZero: true, ticks: { stepSize: 1 } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        updateOverallStatistics();
        createChart('week');
    });

    document.querySelectorAll('.time-range-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.time-range-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            createChart(this.dataset.range);
        });
    });
</script>
    </div>

</body>
</html>